<html>
    <head>
        <title>TEST</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <script type="text/javascript" src="scripts/js.bindings.js"></script>
        <script type="text/javascript" src="scripts/stats.js"></script>
        <script type="text/javascript" src="scripts/input.js"></script>
        <script type="text/javascript" src="scripts/requestAnimationFrameShim.js"></script>
        <script type="text/javascript" src="scripts/eventbus.js"></script>
        <script type="text/javascript" src="scripts/loader.js"></script>
        <script type="text/javascript" src="scripts/menus.js"></script>
        <script type="text/javascript" src="scripts/game.js"></script>
        <script type="text/javascript" src="scripts/editor.js"></script>
        <script type="text/javascript" src="scripts/dom.js"></script>
        <script type="text/javascript" src="scripts/json_to_zig_converter.js"></script>
        <script type="text/javascript">
            // EDITOR -> general output to zig data structures as arrays
            // Going into editor mode means I can still play the game but I can pause it too
            // Create worlds (aka: maps)
            // -- layers
            // -- collisions
            // -- starting locations
            // -- trigger locations
            // Edit images (specifically the rgba bytes <--> zig)
            // Data
            // entities
            // scripts
            // world items
            // strings
            // timeline (seek/fast forward/rewind)

            // TODO: Use the 4x20 world
            // scroll camera to the very top or very bottom
            // bring main player to very top or bottom (whichever you chose)
            // now scroll camera back towards the center
            // main player stays rendered "stickied" to the edge
            window.addEventListener('load', function () {
                document.getElementById('edit').addEventListener('click', function (e) {
                    var es = document.getElementById('edit_submenu');
                    if (es.classList.contains('hide')) {
                        es.classList.remove('hide');
                    } else {
                        es.classList.add('hide');
                    }
                });
            });
        </script>
        <link rel="stylesheet" type="text/css" href="styles/editor.css" />
    </head>
    <body>
        <div class="editor" id="editor_menu">
            <div style="width: 100%; display: grid; grid-template-columns: repeat(6, max-content); grid-gap: 10px;">
                <div onclick="EDITOR.getWorld(); EDITOR.worldDataToZig(EDITOR.worlds_list[0]);">File</div>
                <div>
                    <div id="edit">Edit</div>
                    <div id="edit_submenu" class="hide">
                        <div onclick="EDITOR.override_data_mode = true; document.getElementById('block_mode').innerHTML = 'Block Mode ON'">Override Data Mode</div>
                        <div onclick="EDITOR.generateEntityArray(20, 1, 12);">Generate Entity Array</div>
                        <div onclick="EDITOR.generateWorldArray(8, 8);">Generate New World</div>
                        <hr/>
                        <div onclick="">Create Entity</div>
                        <div onclick="">Create Script</div>
                        <div onclick="">Create Strings</div>
                        <div onclick="GAME.__testImage();">Create Image [debug]</div>
                        <div onclick="">Edit World Data</div>
                        <div onclick="">Create World</div>
                    </div>
                </div>
                <div id="stats" style="background-color: white; color: black; padding: 6px;">&nbsp;</div>
                <div id="current_layer" style="background-color: orange; padding: 6px;">Current Layer: <span class="layer_number">0</span></div>
                <div id="block_mode" style="background-color: blue; color: white; padding: 6px;">Block Mode On/Off</div>
            </div>

            <div id="main_editor_window" style="background-color: rgb(100 100 100 / 50%); padding: 10px;">
                <div>EDITOR WINDOW</div>
                <div>
                    <div>Create Entity</div>
                    <div><input type="text" id="entity_health" name="entity_health" value="10" /></div>
                    <div><input type="submit" name="create_entity" value="Create Entity" onclick="EDITOR.generateEntity(document.getElementById('entity_health').value, 0, 0);" /></div>
                </div>
                <div>
                    <div>Create World</div>
                    <div><input type="text" id="world_width" name="world_width" value="8" /></div>
                    <div><input type="text" id="world_height" name="world_height" value="8" /></div>
                    <div><input type="submit" name="create_world" value="Create World" onclick="EDITOR.generateWorldArray(document.getElementById('world_width').value, document.getElementById('world_height').value);" /></div>
                </div>
                <div>
                    <div>Create Image</div>
                    <div><input type="file" id="image_file" name="image_file" /></div>
                    <div><input type="submit" name="create_image" value="Create Image" onclick="EDITOR.imageToData()" /></div>
                </div>
            </div>

            <div style="background-color: pink; color: white; font-weight: bold; display: none;">
                <input type="text" name="health" value="10" />
                <input type="text" name="position_x" value="1" />
                <input type="text" name="position_y" value="12" />
            </div>
        </div>
        <div id="view">
            <div id="clickable_view"></div>
            <div class="menu date">
                <div class="year">1527</div>
                <div class="month_and_day"><span class="month">May</span> <span class="day">22</span></div>
            </div>
            <div class="menu fullscreen">
                FULL SCREEN
            </div>
        </div>
    </body>
</html>
